<form class="needs-validation" novalidate [formGroup]="form" (ngSubmit)="onSubmit()">
    <fieldset class="border p-2 form-group">
        <legend  class="w-auto">Funcionário</legend>
        <div class="row">
            <div class="col-md-8 mb-3">
                <label for="name" class="control-label">Nome</label>
                <input id="name" type="text" class="form-control" formControlName="name" [ngClass]="classError('name')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('name')">
                    Por favor, informe o nome do funcionário.
                </div>          
            </div>
            <div class="col-md-4 mb-3">
                <label for="birthDate" class="control-label">Data de nascimento</label>
                <input id="birthDate" type="text" class="form-control" formControlName="birthDate" [ngClass]="classError('birthDate')" 
                    bsDatepicker [bsConfig]="bsConfig">
                <div class="invalid-feedback" *ngIf="hasRequiredError('birthDate')">
                    Por favor, informe a data de nascimento.
                </div> 
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 mb-3" formGroupName="staff">
                <label for="staffName" class="control-label">Equipe</label>
                <ng-select id="staffName" formControlName="id" class="form-control" style="border: none" [ngClass]="classError('staff.id')"
                    [items]="staffs$ | async" bindLabel="name" bindValue="id" [multiple]="false" [trackByFn]="trackByFn" [typeahead]="staffName$"
                    [searchable]="!isRegistred" [clearable]="!isRegistred" [hideSelected]="isRegistred" [openOnEnter]="false"
                    notFoundText="Nenhuma equipe foi encontrada" typeToSearchText="Informe o nome da equipe">
                </ng-select>
                <div class="invalid-feedback" *ngIf="hasRequiredError('staff.id')">
                    Por favor, informe a equipe.
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="employeeRegistration" class="col-form-label">Matricula</label>
                <input id="employeeRegistration" type="text" [readonly]="isRegistred" [class.form-control-plaintext]="isRegistred" class="form-control"  formControlName="employeeRegistration" [ngClass]="classError('employeeRegistration')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('employeeRegistration')">
                    Por favor, informe a matricula.
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="hiringDate" class="col-form-label">Data de contratação</label>
                <input id="hiringDate" type="text" [readonly]="isRegistred" [class.form-control-plaintext]="isRegistred" class="form-control" formControlName="hiringDate"
                    bsDatepicker [bsConfig]="bsConfig" [isDisabled]="isRegistred" [ngClass]="classError('hiringDate')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('hiringDate')">
                    Por favor, informe a data de contratação.
                </div>
            </div>            
        </div>
    </fieldset>
    <fieldset class="border p-2 form-group">
        <legend  class="w-auto">Contato</legend>
        <div class="row">
            <div class="col-md-8 mb-3" formGroupName="user">
                <label for="userEmail" class="control-label">E-mail</label>
                <input id="userEmail" type="text" [readonly]="isRegistred" [class.form-control-plaintext]="isRegistred" class="form-control" formControlName="email" [ngClass]="classError('user.email')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('user.email')">
                    Por favor, informe o e-mail.
                </div>
            </div>            
            <div class="col-md-4 mb-3">
                <label for="phoneNumber" class="control-label">Telefone</label>
                <input id="phoneNumber" type="text" class="form-control" formControlName="phoneNumber" [ngClass]="classError('phoneNumber')"
                    telefone [textMask]="{mask: brazilMasks.telefone.textMaskFunction}">
                <div class="invalid-feedback" *ngIf="hasRequiredError('phoneNumber')">
                    Por favor, informe o telefone.
                </div>          
            </div>
        </div>  
    </fieldset>        
    <fieldset class="border p-2 form-group" formGroupName="address">
        <legend  class="w-auto">Endereço</legend>
        <div class="row">
            <div class="col-md-10 mb-3">
                <label for="addressStreet" class="control-label">Rua</label>
                <input id="addressStreet" type="text" class="form-control" formControlName="street" [ngClass]="classError('address.street')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('address.street')">
                    Por favor, informe a rua.
                </div>          
            </div>
            <div class="col-md-2 mb-3">
                <label for="addressHouseNumber" class="control-label">Numero</label>
                <input id="addressHouseNumber" type="text" class="form-control" formControlName="houseNumber" [ngClass]="classError('address.houseNumber')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('address.houseNumber')">
                    Por favor, informe o número da residência.
                </div>          
            </div>
        </div>
        <div class="row">
            <div class="col-md-5 mb-3">
                <label for="addressNeighborhood">Bairro</label>
                <input id="addressNeighborhood" type="text" class="form-control" formControlName="neighborhood" [ngClass]="classError('address.neighborhood')">
                <div class="invalid-feedback" *ngIf="hasRequiredError('address.neighborhood')">
                    Por favor, informe o bairro.
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="addressCity">Cidade</label>
                <select id="addressCity" class="form-control" formControlName="city" [ngClass]="classError('address.city')">
                    <option *ngFor="let city of cities$ | async" [value]="city.name">{{ city.name }}</option>
                </select>
                <div class="invalid-feedback" *ngIf="hasRequiredError('address.city')">
                    Por favor, informe a cidade.
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <label for="addressState">Estado</label>
                <select id="addressState" class="form-control" formControlName="state" [ngClass]="classError('address.state')">
                    <option *ngFor="let state of states$ | async" [value]="state.acronym">{{ state.name }}</option>
                </select>
                <div class="invalid-feedback" *ngIf="hasRequiredError('address.state')">
                    Por favor, informe o estado.
                </div>
            </div>
        </div>
    </fieldset>
    <div class="form-group row">
        <div class="col-sm-12">
            <button type="button" class="btn btn-info btn-lg float-left">Voltar</button>
            <button type="submit" class="btn btn-primary btn-lg float-right">{{ isRegistred ? 'Atualizar' : 'Salvar'}}</button><!--&nbsp;
            <button type="button" class="btn btn-secondary btn-lg">Limpar</button>-->
        </div>        
    </div>        
</form>